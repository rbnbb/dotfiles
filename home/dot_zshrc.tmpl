# ~/.zshrc

#==== P10k Instant Prompt (must be first) ====#
if [[ -r "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh" ]]; then
  source "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh"
fi

#==== Path (only once) ====#
if [ -z $PROFILE_LOADED ]; then
    path+=("$HOME/.local/bin")
    export PROFILE_LOADED=1
fi
path+=($HOME'/.juliaup/bin')
export PATH

#==== Oh-My-Zsh ====#
export ZSH="$HOME/.oh-my-zsh"
ZSH_THEME="powerlevel10k/powerlevel10k"
CASE_SENSITIVE="true"  # case sensitive competion
plugins=(git autojump)
source $ZSH/oh-my-zsh.sh

#==== Environment ====#
export LANG=en_US.UTF-8
export LESSCHARSET=utf-8
export FZF_COMPLETION_TRIGGER=',,'
export JULIA_NUM_THREADS=4
{{ if eq .chezmoi.os "darwin" }}
# androidSDK
export JAVA_HOME=/opt/homebrew/Cellar/openjdk@17/17.0.16/libexec/openjdk.jdk/Contents/Home/
{{- end }}

if [[ -z $SSH_CONNECTION ]]; then
  export EDITOR='nvim'  # local session
  export MANPAGER='nvim +Man!'
  alias vim="nvim"
else
  export EDITOR='vim'  # remote session
fi

#==== ALIASES ====#
alias juliap='julia --project=.'
alias df='df -h' du='du -h'
alias ce='chezmoi edit' css='chezmoi status' ca='chezmoi apply' cra='chezmoi re-add'
{{- if .personal }}
alias pdfcompress="gs -sDEVICE=pdfwrite -dCompatibilityLevel=1.4 -dPDFSETTINGS=/ebook -dNOPAUSE -dQUIET -dBATCH -sOutputFile=output.pdf"
{{- end }}

#==== Tools ====#
[ -x "$(which fzf)" ] && source <(fzf --zsh)

#==== Private ====#
[[ -f ~/.zshrc.private ]] && source ~/.zshrc.private
[[ -f ~/.p10k.zsh ]] && source ~/.p10k.zsh  # customize with `p10k configure`
